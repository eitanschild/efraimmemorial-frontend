<!DOCTYPE html>
<html dir="rtl" lang="he">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>××ª×¨ ×–×™×›×¨×•×Ÿ ×œ××¤×¨×™× ×™×›××Ÿ</title>
  <link rel="icon" href="/favicon.ico?v=1" type="image/x-icon">
  <link href="https://fonts.googleapis.com/css2?family=Varela+Round&display=swap" rel="stylesheet"/>
  <link href="https://fonts.googleapis.com/css2?family=Assistant:wght@400;600;700&display=swap" rel="stylesheet"/>
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            givati: '#5C1A7A'
          }
        }
      }
    }
  </script>
  <style>
    html { scroll-behavior: smooth; }
    body {
      background-image: url('https://www.transparenttextures.com/patterns/white-wall.png');
      background-repeat: repeat;
      background-color: #fefefe;
      font-family: 'Assistant', sans-serif;
    }
  </style>
</head>
<body class="text-gray-800">

<!-- Navbar -->
<!-- Main Navbar -->
<nav class="bg-white/80 backdrop-blur-md border-b border-gray-300 shadow-sm sticky top-0 z-50">
  <div class="max-w-6xl mx-auto px-4 py-4 flex justify-between items-center">
    
    <!-- Right: Menu Toggle (Mobile Only) -->
    <div class="md:hidden">
      <button id="menuToggle" class="text-blue-900 text-2xl focus:outline-none">â˜°</button>
    </div>

    <!-- Center: Main Links (Desktop Only) -->
    <div class="hidden md:flex flex-wrap gap-4 text-blue-900 font-bold text-sm sm:text-base md:text-lg">
      <a href="index.html" class="hover:text-blue-700">×“×£ ×”×‘×™×ª</a>
      <a href="ktavim.html" class="hover:text-blue-700">×›×ª×‘×™ ××¤×¨×™×</a>
      <a href="memories.html" class="hover:text-blue-700">××›×ª×‘×™× ×•×–×›×¨×•× ×•×ª</a>
      <a href="gallery.html" class="hover:text-blue-700">×’×œ×¨×™×”</a>
      <a href="videos.html" class="hover:text-blue-700">×¡×¨×˜×•× ×™×</a>
        <!-- Left: ×œ×–×›×¨×• ×©×œ ××¤×¨×™× ×™×›××Ÿ link -->
      <a href="login.html" class="absolute left-1/2 -translate-x-1/2 text-sm sm:text-base font-bold text-blue-900 hover:text-blue-700 md:static md:translate-x-0 md:ml-auto md:mr-0">×œ×–×›×¨×• ×©×œ ××¤×¨×™× ×™×›××Ÿ</a>
    </div>

  

    <!-- Search Icon (left of toggle on mobile) -->
    <div class="text-blue-900 text-xl cursor-pointer" id="searchToggle">
      ğŸ”
    </div>
  </div>

  <!-- Mobile Menu Links -->
  <div id="mobileMenu" class="hidden flex-col items-end px-4 pb-4 gap-2 text-blue-900 font-bold text-sm sm:text-base md:text-lg md:hidden">
    <a href="index.html" class="block w-full text-right hover:text-blue-700">×“×£ ×”×‘×™×ª</a>
    <a href="ktavim.html" class="block w-full text-right hover:text-blue-700">×›×ª×‘×™ ××¤×¨×™×</a>
    <a href="memories.html" class="block w-full text-right hover:text-blue-700">××›×ª×‘×™× ×•×–×›×¨×•× ×•×ª</a>
    <a href="gallery.html" class="block w-full text-right hover:text-blue-700">×’×œ×¨×™×”</a>
    <a href="videos.html" class="block w-full text-right hover:text-blue-700">×¡×¨×˜×•× ×™×</a>
  </div>
</nav>

<!-- Search Bar Dropdown -->
<div id="searchBarContainer" class="bg-blue-100 px-4 py-6 hidden">
  <div class="max-w-4xl mx-auto">
    <input type="text" id="globalSearch" placeholder="×—×™×¤×•×© ×‘×›×œ ×”××ª×¨..."
      class="w-full p-3 text-right rounded-lg border border-blue-300 shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-400" />
  </div>
  <div id="searchResults" class="max-w-4xl mx-auto mt-6 space-y-8"></div>
</div>

<!-- Hero -->
<section class="relative h-[70vh] sm:h-[90vh] bg-cover bg-center" style="background-image: url('https://efraimemorial-production.up.railway.app/uploads/hero-bg.jpg'); background-position: center top;">
  <div class="absolute inset-0 bg-black bg-opacity-50 backdrop-blur-sm"></div>
  <div class="relative z-10 flex flex-col items-center justify-center h-full text-white text-center px-4 sm:px-6">
    <a href="/login.html" title="×›× ×™×¡×ª ×× ×”×œ">
      <img alt="××¤×¨×™× ×™×›××Ÿ" class="w-40 h-40 rounded-full border-4 border-white shadow-lg mb-6 hover:ring-4 hover:ring-white/50 transition" src="images/ephraim.jpg"/>
    </a>
        <p class="text-base sm:text-xl font-semibold mb-4" style="font-family:'Varela Round', sans-serif;">"×”×™×•×¤×™ ×”×××™×ª×™ ×”×•× ×”×××ª"</p>
    <h1 class="text-3xl sm:text-4xl md:text-5xl font-bold mb-4">××¤×¨×™× ×™×›××Ÿ</h1>
    <p class="text-sm sm:text-lg leading-relaxed max-w-xl">
      ×‘×Ÿ ×œ×™××ª ×•×©××•××œ, ××— ×œ××œ×™×©×‘×¢, ×‘× ×™××™×Ÿ, ×™×•×¡×£, ×—× ×”, ××‘×™×’×™×œ ×•×¨×‘×§×”<br/>
      × ×¤×œ ×‘×§×¨×‘ ×‘×¢×–×”, ×˜"×• ×‘×˜×‘×ª ×ª×©×¤"×“ (26.12.2023), ×‘×Ÿ 21 ×‘× ×•×¤×œ×•
    </p>
  </div>
</section>

<script>
  async function loadKtavim() {
    const res = await fetch('https://efraimemorial-production.up.railway.app/api/ktavim');
    const all = await res.json(); const ktavim = all.filter(k => k.approved);
    const container = document.getElementById('ktavimContainer');
    container.innerHTML = '';

    if (!ktavim.length) {
      container.innerHTML = '<p class="text-center text-gray-600">××™×Ÿ ×¢×“×™×™×Ÿ ×›×ª×‘×™× ×œ×”×¦×’×”.</p>';
      return;
    }

    ktavim.reverse().slice(0, 2).forEach((k, i) => {
      const div = document.createElement('div');
      div.className = 'bg-gray-100 p-6 rounded-xl shadow-lg';

      if (i === 0) {
        div.innerHTML = `
          <h3 class="text-xl font-bold text-gray-800 mb-4">${k.title}</h3>
          <p class="text-lg text-gray-700 leading-relaxed whitespace-pre-line">${k.content}</p>
        `;
      } else {
        const short = k.content.length > 500 ? k.content.substring(0, 500) + "..." : k.content;
        div.innerHTML = `
          <h3 class="text-xl font-bold text-gray-800 mb-4">${k.title}</h3>
          <p class="text-lg text-gray-700 leading-relaxed whitespace-pre-line" id="ktav-preview-${i}" data-expanded="false">${short}</p>
        `;
      }

      container.appendChild(div);
    });
  }

  function toggleKtav(index, fullText) {
    const p = document.getElementById(`ktav-preview-${index}`);
    const isExpanded = p.dataset.expanded === "true";

    if (!isExpanded) {
      p.innerText = fullText;
      p.dataset.expanded = "true";
    } else {
      p.innerText = fullText.length > 500 ? fullText.substring(0, 500) + "..." : fullText;
      p.dataset.expanded = "false";
    }
  }

  loadKtavim();
</script>
<!-- Hero Section -->
<!-- About Section -->
<section class="py-10 px-6 bg-gray-100">
<div class="max-w-4xl mx-auto text-center">
<h2 class="text-2xl md:text-4xl font-bold text-blue-900 mb-6">××•×“×•×ª ××¤×¨×™×</h2>
<p class="text-lg leading-relaxed text-gray-800">
        ×‘× × ×©×œ ×œ×™××ª ×•×©××•××œ. × ×•×œ×“ ×‘×™×•× ×›"×• ×‘××“×¨ ×ª×©×¡"×‘ (10.3.2002) ×‘××œ×•×Ÿ ×©×‘×•×ª. ××— ×œ××œ×™×©×‘×¢, ×‘× ×™××™×Ÿ, ×™×•×¡×£, ×—× ×”, ××‘×™×’×™×œ ×•×¨×‘×§×”.<br/>
        ×‘×™×•× 11.11.2021 ×”×ª×’×™×™×¡ ×œ×¦×”"×œ ×•×©×™×¨×ª ×‘×—×˜×™×‘×ª ×’×‘×¢×ª×™.<br/>
        ×¡××œ ××¤×¨×™× ×™×›××Ÿ × ×¤×œ ×‘×§×¨×‘ ×‘×™×•× ×˜"×• ×‘×˜×‘×ª ×ª×©×¤"×“ (26.12.2023). ×‘×Ÿ ×¢×©×¨×™× ×•××—×ª ×‘× ×•×¤×œ×•. ×”×•× ×”×•×‘× ×œ×× ×•×—×•×ª ×‘×—×œ×§×” ×”×¦×‘××™×ª ×‘×‘×™×ª ×”×¢×œ××™×Ÿ ×›×¤×¨ ×¢×¦×™×•×Ÿ. ×”×•×ª×™×¨ ××—×¨×™×• ×”×•×¨×™× ×•×©×™×©×” ××—×™×.<br/>
        ×œ××—×¨ × ×¤×™×œ×ª×• ×”×•×¢×œ×” ×œ×“×¨×’×ª ×¡××œ ×¨××©×•×Ÿ.
      </p>
</div>
</section>
<!-- Ephraim's Writings Section -->
<section id="ktavim" class="py-10 px-6 bg-[url('https://www.transparenttextures.com/patterns/notebook-dark.png')] bg-repeat bg-white/90">
<div class="max-w-5xl mx-auto">
<h2 class="text-2xl md:text-4xl font-bold text-blue-900 mb-10 text-center">×›×ª×‘×™ ××¤×¨×™×</h2>
<div class="grid gap-6 md:grid-cols-2 mb-8" id="ktavimContainer"></div>
<div class="text-center">
<a class="inline-block bg-blue-900 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition" href="ktavim.html">
        ×œ×¦×¤×™×™×” ×‘×›×œ ×”×›×ª×‘×™×
      </a>
</div>
</div>
</section>

<!-- Gallery Preview -->
<section id="gallery" class="py-10 px-6" style="background-color: transparent;">
  <div class="max-w-6xl mx-auto">
  <h2 class="text-2xl md:text-4xl font-bold text-blue-900 mb-10 text-center">×’×œ×¨×™×™×ª ×ª××•× ×•×ª</h2>
  <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4 mb-8" id="galleryPreview"></div>
  <div class="text-center mt-6">
  <a class="inline-block bg-blue-900 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition" href="gallery.html">×œ×¦×¤×™×™×” ×‘×›×œ ×”×ª××•× ×•×ª</a>
  </div>
  </div>
  </section>
  <script>
  window.addEventListener('DOMContentLoaded', () => {
  async function loadGalleryPreview() {
      const res = await fetch('https://efraimemorial-production.up.railway.app/api/gallery/approved');
      const data = await res.json();
      const grid = document.getElementById('galleryPreview');
      grid.innerHTML = ''; if (data.length === 0) { grid.innerHTML = '<p class="text-center text-gray-500 col-span-full">××™×Ÿ ×ª××•× ×•×ª ×œ×”×¦×’×” ×›×¨×’×¢.</p>'; return; }
      data.reverse().slice(0, 6).forEach(img => {
        const div = document.createElement('div');
        div.className = "bg-white rounded-lg shadow p-2";
        div.innerHTML = `
          <img src="${img.url}" ... />
          <p class="mt-2 text-sm text-gray-600">${img.caption || ""}</p>
        `;
        grid.appendChild(div);
      });
    }
    loadGalleryPreview();
  });
  </script>
  
<!-- Letters & Memories Section -->
<section id="memories" class="py-10 px-6 bg-[url('https://www.transparenttextures.com/patterns/notebook-dark.png')] bg-repeat bg-white/90">
  <div class="max-w-6xl mx-auto">
    <h2 class="text-2xl md:text-4xl font-bold text-blue-900 mb-10 text-center">××›×ª×‘×™× ×•×–×›×¨×•× ×•×ª</h2>

    <!-- Memories Grid -->
    <div id="memoriesFullContainer" class="grid grid-cols-1 md:grid-cols-2 gap-6"></div>

    <!-- View All Button -->
    <div class="text-center mt-8">
      <a class="inline-block bg-blue-900 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition" href="memories.html">
        ×œ×¦×¤×™×™×” ×‘×›×œ ×”××›×ª×‘×™×
      </a>
    </div>
  </div>
</section>

<!-- Script to Load Memories -->
<script>
  async function loadMemories() {
    const res = await fetch('https://efraimemorial-production.up.railway.app/api/memories/approved');
    const memories = await res.json();
    const container = document.getElementById('memoriesFullContainer');
    container.innerHTML = '';

    if (memories.length === 0) {
      container.innerHTML = '<p class="text-center text-gray-600 col-span-full">××™×Ÿ ×¢×“×™×™×Ÿ ×–×™×›×¨×•× ×•×ª ×××•×©×¨×™× ×œ×”×¦×’×”.</p>';
      return;
    }

    memories.reverse().slice(0, 4).forEach(mem => {
      const div = document.createElement('div');
      div.className = 'bg-white p-6 rounded-xl shadow text-right';
      div.innerHTML = `
        <p class="text-lg leading-relaxed mb-4 whitespace-pre-line text-gray-800">${mem.message}</p>
        <p class="text-sm text-gray-600 text-left mt-2">â€“ ${mem.name}</p>
      `;
      container.appendChild(div);
    });
  }

  loadMemories();
</script>

</script>
<!-- Gallery Display -->
<script>
  window.addEventListener('DOMContentLoaded', () => {
    async function loadGalleryPreview() {
      const res = await fetch('https://efraimemorial-production.up.railway.app/api/gallery/approved');
      const data = await res.json();
      const grid = document.getElementById('galleryPreview');
      grid.innerHTML = '';

      if (data.length === 0) {
        grid.innerHTML = '<p class="text-center text-gray-500 col-span-full">××™×Ÿ ×ª××•× ×•×ª ×œ×”×¦×’×” ×›×¨×’×¢.</p>';
        return;
      }

      data.reverse().slice(0, 6).forEach(img => {
        const src = img.url; // We assume all approved entries are Cloudinary now

        const div = document.createElement('div');
        div.className = "bg-white rounded-lg shadow p-2";
        div.innerHTML = `
          <img src="${src}" alt="${img.caption || ''}" class="w-full h-64 object-cover rounded" />
          <p class="mt-2 text-sm text-gray-600">${img.caption || ""}</p>
        `;
        grid.appendChild(div);
      });
    }

    loadGalleryPreview();
  });
</script>



<!--video section-->

<section id="videos" class="py-14 px-6" style="background-image: url('https://www.transparenttextures.com/patterns/white-wall.png'); background-repeat: repeat;">
  <div class="max-w-6xl mx-auto">
    <h2 class="text-2xl md:text-4xl font-bold text-blue-900 mb-10 text-center">×¡×¨×˜×•× ×™× ×œ×–×›×¨ ××¤×¨×™×</h2>

    <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
      <!-- Video 1 -->
      <div class="w-full h-64 rounded-xl overflow-hidden shadow bg-black">
        <iframe class="w-full h-full" 
                src="https://www.youtube.com/embed/ZpiBhteibZM" 
                title="×¡×¨×˜×•×Ÿ 1 ×œ×–×›×¨ ××¤×¨×™×" 
                frameborder="0" 
                allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" 
                allowfullscreen>
        </iframe>
      </div>

      <!-- Video 2 -->
      <div class="w-full h-64 rounded-xl overflow-hidden shadow bg-black">
        <iframe class="w-full h-full" 
                src="https://www.youtube.com/embed/LEJ2h6bgmoM" 
                title="×¡×¨×˜×•×Ÿ 2 ×œ×–×›×¨ ××¤×¨×™×" 
                frameborder="0" 
                allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" 
                allowfullscreen>
        </iframe>
      </div>
    </div>

    <!-- View All Button -->
    <div class="text-center mt-8">
      <a class="inline-block bg-blue-900 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition" href="videos.html">
        ×œ×¦×¤×™×™×” ×‘×›×œ ×”×¡×¨×˜×•× ×™×
      </a>
    </div>
  </div>
</section>


 <!-- Upload + Memory Forms with Spinners -->
<script>
  window.addEventListener('DOMContentLoaded', () => {
    async function loadMemoriesPreview() {
      const res = await fetch('https://efraimemorial-production.up.railway.app/api/memories/approved');
      const data = await res.json();
      const container = document.getElementById('memoriesPreview');
      if (!container) return;
      container.innerHTML = '';
      if (data.length === 0) {
        container.innerHTML = '<p class="text-center text-gray-500">××™×Ÿ ×–×™×›×¨×•× ×•×ª ×œ×”×¦×’×” ×›×¨×’×¢.</p>'; return;
      }
      data.reverse().slice(0, 4).forEach(mem => {
        const div = document.createElement('div');
        div.className = 'bg-gray-100 p-6 rounded-xl shadow';
        div.innerHTML = `
          <h3 class="text-xl font-bold text-gray-800 mb-2">${mem.name}</h3>
          <p class="text-md text-gray-700 whitespace-pre-line leading-relaxed">${mem.message}</p>
        `;
        container.appendChild(div);
      });
    }
    loadMemoriesPreview();
  });
  </script>
  
  <section class="py-10 px-6 bg-white">
    <div class="max-w-6xl mx-auto grid grid-cols-1 md:grid-cols-2 gap-8">
  
      <!-- Upload Image Form -->
      <div>
        <h2 class="text-2xl md:text-3xl font-bold text-blue-900 mb-6 text-center">×”×¢×œ×” ×ª××•× ×” ×œ×’×œ×¨×™×”</h2>
        <form class="bg-gray-50 p-6 rounded-xl shadow space-y-4" enctype="multipart/form-data" id="galleryForm">
          <input accept="image/*" class="w-full p-3 border rounded-lg bg-white" id="image" name="image" required type="file" />
          <input class="w-full p-3 border rounded-lg" id="uploader" name="uploader" placeholder="×©××š (×”××©×œ×—)" required type="text" />
          <input class="w-full p-3 border rounded-lg" id="caption" name="caption" placeholder="×›×™×ª×•×‘ ×œ×ª××•× ×” (×œ× ×—×•×‘×”)" type="text" />
          <button class="w-full bg-blue-900 text-white py-3 rounded-lg hover:bg-blue-900/90 transition" type="submit">×©×œ×— ×ª××•× ×”</button>
          <div id="galleryLoading" class="flex justify-center items-center gap-2 text-blue-600 text-center hidden">
            <svg class="animate-spin h-5 w-5 text-blue-600" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
              <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
              <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"></path>
            </svg>
            ×©×•×œ×— ×ª××•× ×”...
          </div>
          <p class="text-green-600 text-center mt-4 hidden" id="galleryResponse">×”×ª××•× ×” × ×©×œ×—×” ×•×××ª×™× ×” ×œ××™×©×•×¨</p>
          <p class="text-red-600 text-center mt-4 hidden" id="galleryError">×©×’×™××” ×‘×”×¢×œ××ª ×”×ª××•× ×”</p>
        </form>
      </div>
  
      <!-- Submit Memory Form -->
      <div>
        <h2 class="text-2xl md:text-3xl font-bold text-blue-900 mb-6 text-center">×©×œ×—×• ×–×™×›×¨×•×Ÿ ××• ××›×ª×‘</h2>
        <form class="bg-gray-50 p-6 rounded-xl shadow space-y-4" id="memoryForm">
          <input class="w-full p-3 border rounded-lg" id="name" name="name" placeholder="×©××š" required type="text" />
          <textarea class="w-full p-3 border rounded-lg" id="message" name="message" placeholder="×–×™×›×¨×•×Ÿ ××• ××›×ª×‘..." required rows="4"></textarea>
          <button class="w-full bg-blue-900 text-white py-3 rounded-lg hover:bg-blue-900 transition" type="submit">×©×œ×— ×–×™×›×¨×•×Ÿ</button>
          <div id="memoryLoading" class="flex justify-center items-center gap-2 text-blue-600 text-center hidden">
            <svg class="animate-spin h-5 w-5 text-blue-600" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
              <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
              <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"></path>
            </svg>
            ×©×•×œ×— ×–×™×›×¨×•×Ÿ...
          </div>
          <p class="text-green-600 text-center mt-4 hidden" id="memoryResponse">×”×–×™×›×¨×•×Ÿ × ×©×œ×— ×•×××ª×™×Ÿ ×œ××™×©×•×¨</p>
        </form>
      </div>
  
    </div>
  </section>
  
  <script>
    const galleryForm = document.getElementById('galleryForm');
    galleryForm.addEventListener('submit', async (e) => {
      e.preventDefault();
      const file = document.getElementById('image').files[0];
      if (!file) return;
      if (file.size > 5 * 1024 * 1024) {
        alert('×’×•×“×œ ×”×ª××•× ×” ×—×•×¨×’ ××”××•×ª×¨ (××§×¡×™××•× 5MB).');
        return;
      }
      document.getElementById('galleryLoading').classList.remove('hidden');
      const formData = new FormData();
      formData.append('image', file);
      formData.append('caption', document.getElementById('caption').value);
      formData.append('uploader', document.getElementById('uploader').value);
      try {
        const res = await fetch('https://efraimemorial-production.up.railway.app/api/gallery', {
          method: 'POST',
          body: formData
        });
        document.getElementById('galleryLoading').classList.add('hidden');
        if (res.ok) {
          document.getElementById('galleryResponse').classList.remove('hidden');
          document.getElementById('galleryError').classList.add('hidden');
          galleryForm.reset();
        } else {
          document.getElementById('galleryError').classList.remove('hidden');
          document.getElementById('galleryResponse').classList.add('hidden');
        }
      } catch (err) {
        console.error('Upload error:', err);
        document.getElementById('galleryError').classList.remove('hidden');
        document.getElementById('galleryResponse').classList.add('hidden');
        document.getElementById('galleryLoading').classList.add('hidden');
      }
    });
  
    const memoryForm = document.getElementById('memoryForm');
    memoryForm.addEventListener('submit', async (e) => {
      e.preventDefault();
      document.getElementById('memoryLoading').classList.remove('hidden');
      const name = document.getElementById('name').value;
      const message = document.getElementById('message').value;
      const res = await fetch('https://efraimemorial-production.up.railway.app/api/memories', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ name, message })
      });
      document.getElementById('memoryLoading').classList.add('hidden');
      if (res.ok) {
        document.getElementById('memoryResponse').classList.remove('hidden');
        memoryForm.reset();
      } else {
        alert('×©×’×™××” ×‘×©×œ×™×—×ª ×”×–×™×›×¨×•×Ÿ');
      }
    });
  </script>
  <!-- Donation Section -->
<section class="py-16 px-6 bg-blue-50 border-t border-blue-200">
  <div class="max-w-4xl mx-auto text-center space-y-6">
    <h2 class="text-2xl md:text-3xl font-bold text-blue-900">×ª×¨×•××” ×œ×–×›×¨ ××¤×¨×™×</h2>
    <p class="text-lg text-gray-700 leading-relaxed max-w-2xl mx-auto">
      ×ª×¨×•××ª×›× ×ª×¢×–×•×¨ ×œ×§×“× ×™×•×–××•×ª ×—×™× ×•×›×™×•×ª, ×—×‘×¨×ª×™×•×ª ×•×§×”×™×œ×ª×™×•×ª ×©× ×¢×©×•×ª ×œ×–×›×¨×• ×©×œ ××¤×¨×™× ×™×›××Ÿ ×–×´×œ â€“ ×œ×•×—× ×’×‘×¢×ª×™, ×× ×”×™×’ ×•×“××•×ª ××•×¤×ª.
    </p>
    <a href="https://www.peach-in.com/cmp/MGsVpsm3l?ref=DI5K1che&lang=he" target=" 
    â‚ª 500,000"
       class="inline-block bg-blue-900 hover:bg-blue-800 text-white text-lg font-semibold px-6 py-3 rounded-lg transition">
      ×œ×ª×¨×•××” ×œ×¤×¨×•×™×§×˜×™× ×œ×–×›×¨×• ×©×œ ××¤×¨×™×
    </a>
  </div>
</section>

<!-- Global Search Script -->
<script>
  const searchToggle = document.getElementById('searchToggle');
  const searchBar = document.getElementById('searchBarContainer');
  const input = document.getElementById('globalSearch');
  const results = document.getElementById('searchResults');

  searchToggle.addEventListener('click', () => {
    searchBar.classList.toggle('hidden');
    input.focus();
  });

  input.addEventListener('input', async () => {
    const q = input.value.trim();

    if (!q) {
      results.innerHTML = '';
      return;
    }

    const res = await fetch('https://efraimemorial-production.up.railway.app/api/search?q=' + encodeURIComponent(q));
    const data = await res.json();
    results.innerHTML = '';

    // Highlight helper
    const highlight = (text) => {
      const regex = new RegExp(`(${q})`, 'gi');
      return text.replace(regex, '<mark class="bg-yellow-300">$1</mark>');
    };

    // Snippet extractor (around match)
    const getSnippet = (text) => {
      const lower = text.toLowerCase();
      const index = lower.indexOf(q.toLowerCase());
      if (index === -1) return '';
      const start = Math.max(0, index - 30);
      const end = Math.min(text.length, index + 70);
      return '...' + highlight(text.substring(start, end)) + '...';
    };

    // ---- KTAVIM ----
    if (data.ktavim.length) {
      results.innerHTML += `
        <div>
          <h3 class="text-xl font-bold text-blue-900 mb-2">âœï¸ ×›×ª×‘×™×</h3>
          <ul class="space-y-3">
            ${data.ktavim.map(k => `
              <li class="bg-white p-4 rounded-xl shadow text-right">
                <a href="ktavim.html#${encodeURIComponent(k.title)}" class="text-blue-800 font-semibold hover:underline text-lg block">${k.title}</a>
                <p class="text-sm text-gray-700 mt-1">${getSnippet(k.content)}</p>
              </li>
            `).join('')}
          </ul>
        </div>`;
    }

    // ---- MEMORIES ----
    if (data.memories.length) {
      results.innerHTML += `
       <div>
          <h3 class="text-xl font-bold text-blue-900 mb-2 mt-8">ğŸ’Œ ×–×™×›×¨×•× ×•×ª</h3>
          <ul class="space-y-3">
            ${data.memories.map((m, i) => `
             <li class="bg-white p-4 rounded-xl shadow text-right">
               <a href="memories.html#memory-${i}" class="font-bold text-blue-800 hover:underline">${m.name}</a>
               <p class="text-sm text-gray-700 mt-1">${getSnippet(m.message)}</p>
             </li>
            `).join('')}
          </ul>
       </div>`;
}


    // ---- VIDEOS ----
    if (data.videos.length) {
      results.innerHTML += `
        <div>
          <h3 class="text-xl font-bold text-blue-900 mb-2 mt-8">ğŸ¥ ×¡×¨×˜×•× ×™×</h3>
          <ul class="space-y-3">
            ${data.videos.map(v => `
              <li class="bg-white p-4 rounded-xl shadow text-right">
                <a href="videos.html" class="text-blue-800 font-semibold hover:underline block">${highlight(v.title)}</a>
              </li>
            `).join('')}
          </ul>
        </div>`;
    }
  });
</script>

<script>
  const toggle = document.getElementById('menuToggle');
  const mobileMenu = document.getElementById('mobileMenu');

  toggle.addEventListener('click', () => {
    mobileMenu.classList.toggle('hidden');
  });
</script>


</body>
</html>

